<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown Editor</title>

  <!-- Content Security Policy -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com 'unsafe-inline';
    style-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com 'unsafe-inline';
    font-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com data:;
    img-src 'self' data: blob: https:;
    connect-src 'self';
    frame-src 'none';
    object-src 'none';
    base-uri 'self';
    form-action 'self';
  ">

  <!-- Highlight.js -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" id="hljs-light">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" id="hljs-dark" disabled>

  <!-- KaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>

  <!-- Mermaid -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

  <!-- Marked (Markdown parser) -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- Highlight.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <link rel="stylesheet" href="editor.css">
</head>
<body>
  <div class="toolbar">
    <div class="toolbar-left">
      <img src="çˆªblack.png" alt="Logo" class="app-logo app-logo-light"><img src="çˆªwhite.png" alt="Logo" class="app-logo app-logo-dark"><span class="app-title">Markdown Editor</span>
    </div>
    <div class="toolbar-right">
      <div class="view-toggle" id="viewToggle">
        <button class="view-btn" data-mode="editor" title="åƒ…ç·¨è¼¯å™¨">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M11.5 2.5l2 2-8 8H3.5v-2l8-8z"/>
            <path d="M10 4l2 2"/>
          </svg>
        </button>
        <button class="view-btn active" data-mode="split" title="åˆ†å‰²æª¢è¦–">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="2" y="2" width="5" height="12" rx="1"/>
            <rect x="9" y="2" width="5" height="12" rx="1"/>
          </svg>
        </button>
        <button class="view-btn" data-mode="preview" title="åƒ…é è¦½">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
            <ellipse cx="8" cy="8" rx="6" ry="4"/>
            <circle cx="8" cy="8" r="2"/>
          </svg>
        </button>
      </div>
      <button id="insertMermaid" class="btn" title="æ’å…¥ Mermaid åœ–è¡¨">ğŸ“Š Mermaid</button>
      <button id="themeToggle" class="btn" title="åˆ‡æ›ä¸»é¡Œ">ğŸŒ™ æš—è‰²</button>
      <button id="downloadHtml" class="btn" title="ä¸‹è¼‰ HTML">ğŸ“„ ä¸‹è¼‰ HTML</button>
      <button id="downloadMd" class="btn" title="ä¸‹è¼‰ MD">ğŸ’¾ ä¸‹è¼‰ MD</button>
      <button id="exportPdf" class="btn" title="åŒ¯å‡º PDF">ğŸ“‘ åŒ¯å‡º PDF</button>
      <button id="clearBtn" class="btn" title="æ¸…é™¤å…§å®¹">ğŸ—‘ï¸ æ¸…é™¤</button>
    </div>
  </div>

  <div class="container">
    <div class="editor-pane" id="editorPane">
      <div class="pane-header">
        <span>Markdown</span>
        <div class="pane-header-right">
          <span class="char-count" id="charCount">0 å­—</span>
        </div>
      </div>
      <textarea id="editor" placeholder="åœ¨æ­¤è¼¸å…¥æˆ–è²¼ä¸Š Markdown å…§å®¹...

æ”¯æ´åŠŸèƒ½ï¼š
- GitHub Flavored Markdown (GFM)
- ç¨‹å¼ç¢¼èªæ³•é«˜äº®
- è¡¨æ ¼ã€ä»»å‹™æ¸…å–®
- Mermaid åœ–è¡¨ (```mermaid)
- KaTeX æ•¸å­¸å…¬å¼ ($...$, $$...$$)

è©¦è©¦è²¼ä¸Šä¸€äº› Markdown å…§å®¹ï¼"></textarea>
    </div>

    <div class="divider" id="divider"></div>

    <div class="preview-pane" id="previewPane">
      <div class="pane-header">
        <span>é è¦½</span>
      </div>
      <div id="preview" class="markdown-body"></div>
    </div>
  </div>

  <footer class="footer">
    Copyright &copy; 2026 Java Li
  </footer>

  <script src="editor.js"></script>
</body>
</html>
